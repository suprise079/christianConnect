{"ast":null,"code":"var _jsxFileName = \"/Users/malebomoleleki/Documents/GitHub/christianConnect/src/pages/Users/EditUser.jsx\",\n    _s = $RefreshSig$();\n\nimport { IonPage, IonItem, IonTitle, IonLabel, IonCheckbox, IonButton, IonInput, IonDatetime, IonContent } from '@ionic/react';\nimport { Camera, CameraResultType } from '@capacitor/camera'; // geta css files\n\nimport '../Profile.css';\nimport \"./EditUser.css\";\nimport React, { useEffect, useContext, useState } from 'react';\nimport { useHistory } from 'react-router';\nimport profileImg from \"./profile.jpeg\"; // get db context\n\nimport Context from '../../context/Context';\nimport { deleteDocument, editUser, getUserImg, LoginUser, updateProfileImg } from '../../firebase/firebase-help';\nimport Cookies from 'js-cookie'; // import firebase and its modules\n\nimport { auth } from '../../firebase/firebase';\nimport { updateProfile, deleteUser } from \"firebase/auth\";\nimport { takePicture } from '../../components/helpFunc';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst EditUser = () => {\n  _s();\n\n  // for editing purposes\n  const [user, setUser] = useState(JSON.parse(Cookies.get(\"userData\")) ? JSON.parse(Cookies.get(\"userData\")) : \"\");\n  const {\n    curUser,\n    setCurUser,\n    fellowship,\n    setFellowship\n  } = useContext(Context);\n  const [userPhoto, setUserPhoto] = useState();\n  const history = useHistory();\n  const [fname, setFname] = useState(user === null || user === void 0 ? void 0 : user.firstname);\n  const [lname, setLname] = useState(user === null || user === void 0 ? void 0 : user.lastname);\n  const [phone, setPhone] = useState(user === null || user === void 0 ? void 0 : user.phoneNumber);\n  const [image, setImage] = useState(user === null || user === void 0 ? void 0 : user.profilePic); // new leader and setting fellowship name\n  // const [fsName, setFsName] = useState(\"\");\n  // const [wannaBeLeader, setWannaBeLeader] = useState(false); \n\n  useEffect(() => {\n    setFellowship(JSON.parse(Cookies.get(\"curLeaderFs\")));\n    setCurUser(JSON.parse(Cookies.get(\"userData\"))); // console.log( user )\n\n    getUserImg(user === null || user === void 0 ? void 0 : user.userId).then(res => {\n      if (res) {\n        setUserPhoto(res);\n      } else {\n        setUserPhoto(false);\n      }\n    });\n  }, []);\n\n  const delUser = () => {\n    var isTrue = window.confirm(\"Continue To Delete Account..?\");\n\n    if (isTrue) {\n      deleteDocument(\"Users\", curUser.id).then(() => {\n        const user = auth.currentUser; // get the current user\n        // delete user from auth\n\n        deleteUser(user).then(() => {\n          // Cookies.remove(\"userData\"); // delete user data from session cookie\n          alert(\"User Account Deleted\");\n          history.push(\"/\");\n        }).catch(error => {\n          console.error(error.code);\n          alert(error.code);\n        });\n      });\n    }\n  };\n\n  const EditUser = () => {\n    if (fname && lname && phone) {\n      if (image && image != null && image != undefined) {\n        // console.log( image );\n        updateProfileImg(curUser === null || curUser === void 0 ? void 0 : curUser.userId, image);\n      }\n\n      var res = window.confirm(\"Continue..?\");\n\n      if (res) {\n        editUser(fname, lname, phone, curUser.id).then(() => {\n          LoginUser(curUser.userId).then(data => {\n            if (data) {\n              Cookies.remove(\"userData\"); // remove current user data\n\n              Cookies.set(\"userData\", JSON.stringify(data)); // set new user data from fb \n\n              setCurUser(JSON.parse(Cookies.get(\"userData\"))); // set user in Context\n\n              history.push((data === null || data === void 0 ? void 0 : data.isLeader) ? \"/leader\" : \"/profile\"); // redirect user to homepage\n            }\n          }).catch(err => {\n            console.error(err.code);\n          });\n        });\n      }\n    } else {\n      alert(\"Please Fill All fields....\");\n    }\n  };\n\n  const EditPhoto = fileinput => {\n    if (fileinput && fileinput != null) {\n      // console.log(fileinput)\n      var data = new FileReader(); // console.log( data )\n      // data.onload = function(e) {\n      //   console.log( \"HERE\", e.target.result);\n      // };\n\n      data.addEventListener(\"load\", function (d) {\n        // console.log(\"FILE READER\", d.target.result)\n        setImage(d.target.result);\n      });\n      data.readAsDataURL(fileinput);\n    } else {\n      console.error(\"READ IMG ERROR\");\n    } // takePicture().then( image => {\n    //   console.log( image )\n    // })\n\n  };\n\n  return /*#__PURE__*/_jsxDEV(IonPage, {\n    children: /*#__PURE__*/_jsxDEV(IonContent, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"editUserAccount\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bgColor\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"editProfileImg\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            // onClick={ e=> EditPhoto() }\n            src: userPhoto ? userPhoto.photo : \"\",\n            alt: \"photo of \" + (curUser === null || curUser === void 0 ? void 0 : curUser.firstname) + \" \" + (curUser === null || curUser === void 0 ? void 0 : curUser.lastname)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: e => EditPhoto(e.target.files[0]),\n            placeholder: \"Select Image\",\n            type: {\n              backgroundColoe: \"red\"\n            },\n            type: \"file\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [// display the session name, if user is a leader\n          (curUser === null || curUser === void 0 ? void 0 : curUser.isLeader) ? /*#__PURE__*/_jsxDEV(IonTitle, {\n            id: \"nameTitle\",\n            children: [fellowship === null || fellowship === void 0 ? void 0 : fellowship.name, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 15\n          }, this) : \"\", /*#__PURE__*/_jsxDEV(IonTitle, {\n            id: \"nameTitle\",\n            children: [\" \", curUser === null || curUser === void 0 ? void 0 : curUser.firstname, \" \", curUser === null || curUser === void 0 ? void 0 : curUser.lastname, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"editUser_editButtons\",\n          lines: \"full\",\n          children: [/*#__PURE__*/_jsxDEV(IonButton, {\n            className: \"editbutton\",\n            onClick: e => delUser(),\n            size: \"small\",\n            color: \"#348D63\",\n            children: \"Delete Account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(IonButton, {\n            className: \"editbutton\",\n            onClick: e => EditUser(),\n            size: \"small\",\n            color: \"#348D63\",\n            children: \"Edit Profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"inputFields\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"edituserField\",\n            lines: \"full\",\n            children: /*#__PURE__*/_jsxDEV(IonInput, {\n              value: fname,\n              placeholder: \"user firstname\",\n              className: \"field\",\n              placeholder: \"Firstname\",\n              onIonChange: e => setFname(e.detail.value),\n              clearInput: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"edituserField\",\n            lines: \"full\",\n            children: /*#__PURE__*/_jsxDEV(IonInput, {\n              value: lname,\n              className: \"field\",\n              placeholder: \"user lastname\",\n              placeholder: \"Lastname\",\n              onIonChange: e => setLname(e.detail.value),\n              clearInput: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"edituserField\",\n            lines: \"full\",\n            children: /*#__PURE__*/_jsxDEV(IonInput, {\n              value: phone,\n              className: \"field\",\n              placeholder: \"user phone number\",\n              placeholder: \"Phone number\",\n              onIonChange: e => setPhone(e.detail.value),\n              clearInput: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 142,\n    columnNumber: 5\n  }, this);\n};\n\n_s(EditUser, \"6lTpM4s2gmq/scUJ2UedWjrvnfc=\", false, function () {\n  return [useHistory];\n});\n\n_c = EditUser;\nexport default EditUser;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditUser\");","map":{"version":3,"sources":["/Users/malebomoleleki/Documents/GitHub/christianConnect/src/pages/Users/EditUser.jsx"],"names":["IonPage","IonItem","IonTitle","IonLabel","IonCheckbox","IonButton","IonInput","IonDatetime","IonContent","Camera","CameraResultType","React","useEffect","useContext","useState","useHistory","profileImg","Context","deleteDocument","editUser","getUserImg","LoginUser","updateProfileImg","Cookies","auth","updateProfile","deleteUser","takePicture","EditUser","user","setUser","JSON","parse","get","curUser","setCurUser","fellowship","setFellowship","userPhoto","setUserPhoto","history","fname","setFname","firstname","lname","setLname","lastname","phone","setPhone","phoneNumber","image","setImage","profilePic","userId","then","res","delUser","isTrue","window","confirm","id","currentUser","alert","push","catch","error","console","code","undefined","data","remove","set","stringify","isLeader","err","EditPhoto","fileinput","FileReader","addEventListener","d","target","result","readAsDataURL","photo","e","files","backgroundColoe","name","detail","value"],"mappings":"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","sourcesContent":["import { IonPage, IonItem, IonTitle, IonLabel, IonCheckbox, IonButton, IonInput,\n  IonDatetime, IonContent \n} from '@ionic/react';\n\nimport { Camera, CameraResultType } from '@capacitor/camera';\n\n\n// geta css files\nimport '../Profile.css';\nimport \"./EditUser.css\";\n\n\nimport React, { useEffect, useContext, useState } from 'react';\nimport { useHistory } from 'react-router';\n\nimport profileImg from \"./profile.jpeg\";\n\n\n// get db context\nimport Context from '../../context/Context';\nimport { deleteDocument, editUser, getUserImg, LoginUser, updateProfileImg\n} from '../../firebase/firebase-help';\nimport Cookies from 'js-cookie';\n\n\n// import firebase and its modules\nimport { auth } from '../../firebase/firebase';\nimport {\n  updateProfile, deleteUser\n} from \"firebase/auth\";\nimport { takePicture } from '../../components/helpFunc';\n\n\n\n\nconst EditUser = () => {\n  // for editing purposes\n  const [ user, setUser ] = useState(\n    JSON.parse(Cookies.get(\"userData\")) ? JSON.parse(Cookies.get(\"userData\")) : \"\" )\n  const { curUser, setCurUser, fellowship, setFellowship } = useContext( Context );\n  const [ userPhoto, setUserPhoto ] = useState();\n  const history = useHistory();\n  const [fname, setFname] = useState( user?.firstname );\n  const [lname, setLname] = useState( user?.lastname );\n  const [phone, setPhone] = useState( user?.phoneNumber );\n  const [image, setImage] = useState( user?.profilePic );\n  // new leader and setting fellowship name\n  // const [fsName, setFsName] = useState(\"\");\n  // const [wannaBeLeader, setWannaBeLeader] = useState(false); \n  \n  \n  useEffect(() => {\n    setFellowship( JSON.parse(Cookies.get(\"curLeaderFs\")) );\n    setCurUser( JSON.parse( Cookies.get(\"userData\") ) );\n\n    // console.log( user )\n    getUserImg( user?.userId ).then( res => {\n      if( res ) { setUserPhoto( res ) }\n      else { setUserPhoto( false ) }\n    })\n  },[])\n\n\n  const delUser = () => {\n    var isTrue = window.confirm(\"Continue To Delete Account..?\");\n\n    if( isTrue ) {\n      deleteDocument(\"Users\", curUser.id ).then(() => {\n        const user = auth.currentUser; // get the current user\n        // delete user from auth\n        deleteUser( user ).then(() => {\n          // Cookies.remove(\"userData\"); // delete user data from session cookie\n          alert(\"User Account Deleted\");\n          history.push(\"/\");\n        }).catch( error => {\n          console.error( error.code );\n          alert( error.code );\n        })\n      })\n    }\n  }\n\n  const EditUser = () => {\n\n    if( fname && lname && phone ) {\n      \n      if( image && image != null && image != undefined ) {\n        // console.log( image );\n        updateProfileImg( curUser?.userId, image );\n      }\n\n      var res = window.confirm(\"Continue..?\");\n\n      if( res ) { \n        editUser( fname, lname, phone, curUser.id ).then(() => {\n        \n          LoginUser( curUser.userId )\n          .then(( data ) => {\n  \n            if( data ) {\n              Cookies.remove(\"userData\"); // remove current user data\n              Cookies.set(\"userData\",JSON.stringify(data));// set new user data from fb \n              setCurUser( JSON.parse( Cookies.get(\"userData\")) ); // set user in Context\n              history.push( data?.isLeader ? \"/leader\" : \"/profile\" ) // redirect user to homepage\n            }\n          })\n          .catch( err => {\n            console.error( err.code );\n          })\n        })\n      }\n     \n    }\n    else { alert(\"Please Fill All fields....\") }\n  }\n\n  const EditPhoto = ( fileinput ) => {\n    if( fileinput && fileinput != null  ) {\n      // console.log(fileinput)\n\n      var data = new FileReader()\n      // console.log( data )\n      // data.onload = function(e) {\n      //   console.log( \"HERE\", e.target.result);\n      // };\n\n      data.addEventListener(\"load\", function(d){ \n        // console.log(\"FILE READER\", d.target.result)\n        setImage(d.target.result)\n      })\n     data.readAsDataURL(fileinput);\n    }\n    else { console.error(\"READ IMG ERROR\") }\n\n    // takePicture().then( image => {\n    //   console.log( image )\n    // })\n  }\n\n\n  return (\n    <IonPage>\n\n      <IonContent >\n      \n      <div id=\"editUserAccount\" >\n\n        <div className=\"bgColor\"></div>\n\n        <div className=\"editProfileImg\" >\n          <img\n            // onClick={ e=> EditPhoto() }\n            src={ userPhoto ? userPhoto.photo : \"\" }\n            alt={ \"photo of \" + curUser?.firstname + \" \" + curUser?.lastname } />\n          <br />\n          <input\n            onChange = { e => EditPhoto( e.target.files[0] ) }\n            placeholder=\"Select Image\"\n            type={{backgroundColoe:\"red\"}}  type=\"file\" />\n        </div>\n\n        <div >\n          { // display the session name, if user is a leader\n            curUser?.isLeader ? (\n              <IonTitle id=\"nameTitle\" >\n                { fellowship?.name } </IonTitle>\n            ) : (\"\")\n          }\n        <IonTitle id=\"nameTitle\" > { curUser?.firstname } { curUser?.lastname } </IonTitle>\n        </div>\n\n        <div id=\"editUser_editButtons\" lines=\"full\" >\n          <IonButton\n            className=\"editbutton\"\n            onClick={ e => delUser() }\n            size=\"small\"\n            color=\"#348D63\">Delete Account</IonButton>\n\n          <IonButton\n            className=\"editbutton\"\n            onClick={ e => EditUser() }\n            size=\"small\"\n            color=\"#348D63\">Edit Profile</IonButton>\n        </div>\n\n\n        <div id=\"inputFields\" >\n\n          {/* <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              alignItems: \"center\",\n              justifyContent: \"flex-start\",\n              width: \"80%\",\n              padding: \"0\",\n            }}\n            onClick={() => {\n              setWannaBeLeader(!wannaBeLeader);\n              setFsName(\"\");\n            }}\n          >\n            <IonCheckbox checked={wannaBeLeader} name=\"checkbox\" />\n            <IonLabel style={{ marginLeft: \"20px\" }} htmlFor=\"checkbox\">\n              Register as a leader\n            </IonLabel>\n          </div>\n\n          <div >\n            { wannaBeLeader ? (\n              <>\n                <IonInput\n                  placeholder=\"Fellowship name\"\n                  autofocus\n                  required\n                  value={fsName}\n                  onIonChange={(e) => setFsName( e.target.value )}\n                  name=\"fsName\"\n                  clearInput=\"true\"\n                  className=\"inputField\"\n                ></IonInput>\n              </>\n            ) : (\n              \"\"\n            )}\n          </div> */}\n\n          <div className=\"edituserField\" lines=\"full\">\n            <IonInput\n              value={ fname }\n              placeholder=\"user firstname\"\n              className=\"field\"\n              placeholder=\"Firstname\"\n              onIonChange={e => setFname(e.detail.value)}\n              clearInput />\n          </div>\n\n          <div className=\"edituserField\" lines=\"full\">\n            <IonInput\n              value={ lname }\n              className=\"field\"\n              placeholder=\"user lastname\"\n              placeholder=\"Lastname\"\n              onIonChange={e => setLname(e.detail.value)}\n              clearInput />\n          </div>\n\n          <div className=\"edituserField\" lines=\"full\">\n            <IonInput\n              value={ phone }\n              className=\"field\"\n              placeholder=\"user phone number\"\n              placeholder=\"Phone number\"\n              onIonChange={e => setPhone(e.detail.value)}\n              clearInput />\n          </div>\n\n          {/* <div className=\"edituserField\" lines=\"full\">\n            <IonInput\n              className=\"field\"\n              placeholder=\"E-mail\"\n              onIonChange={e => setText(e.detail.value)}\n              clearInput />\n          </div> */}\n\n          {/* <div className=\"edituserBtn\" lines=\"full\">\n            <IonButton\n              className=\"editbutton\"\n              onClick={ e => EditUser() }\n              size=\"small\"\n              color=\"#348D63\">Edit Profile</IonButton>\n          </div> */}\n        </div>\n\n        {/* <IonDatetime value=\"2019-10-01T15:43:40.394Z\" display-timezone=\"utc\"> */}\n        {/* </IonDatetime> */}\n        {/* <IonItem className=\"about\" lines=\"full\"> */}\n        {/* </IonItem> */}\n      </div>\n      \n\n\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default EditUser;\n\n"]},"metadata":{},"sourceType":"module"}